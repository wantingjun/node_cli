## 自定义终端命令的过程
1. 创建index,js文件，添加shebang
2. 修改packag.json文件，增加bin
```
  "bin": {
    "why": "index.js"
  },
```
* 在终端输入`npm link`,之后执行why他，就可以执行`index.js`文件 
## commander.js
https://segmentfault.com/a/1190000019350684
* 基于这个库做开发
```
const program = require("commander")
```
###  自定义版本号
1. 读取package.json里的version显示出来
2. 命令行执行`wan --version`可以显示版本号
### 增加自己的options
1. 命令行wan --help
## 执行why create demo
1. 执行`why create demo`这个指令，应该发送发生：
* npm install
* 打开浏览器
* 执行 npm run serve
* 打开浏览器
2. 怎么实现？
* 创建create.js
* 只要涉及到action的，封装为actions.js文件,提升可维护性和可扩展性
3. createProjectAction做了什么
* clone项目
* 执行npm install
* 运行Npm run serve
* 打开浏览器
### clone项目
* 使用`download-git-repo`
1. https://gitlab.com/flippidippi/download-git-repo#readme
* 用这个下载项目模板
2.  这个库以回调函数的方式，进行使用，不支持pomise，容易形成回调地狱。
  * 使用node自带的util库中的promisify，将回调转为pomise的形式。看回调的结果有没有错误 ，有错误就执行promise的reject，没有错误就resolve
  * 继续把他改成async/await的形式
  * `callback--promisify --- promise--async awiat`
3. download的地址
  * 最好不要写死，以后会变，可以建一个文件夹config/repo-config.js
  ```
  ```
4. 命令行执行`wan create demo01 aaa bb`就可以创建一个文件夹，名叫demo01.里面有clone下来的项目
### npm install
* 封装一个执行terminal终端命令相关的代码,创建`util/terminal.js`
1. 需要使用`children_process`的模块
2. 把指令执行的信息打印出来
3. 指令执行完后，通知回去
* 使用promise的形式
4. windows的错误
* windows执行cmd的时候，执行的是`npm.cmd`
* 所以需要判断是否是windows环境，利用`process.platform`判断平台
```js
// 2. 执行npm install
  const command = process.platform === 'win32' ? 'npm.cmd' : 'npm';
  await commandSpawn(command, ['install'], { cwd: `./${project}` })
```
### 打开浏览器
* open库
1. 由于npm run serve的子进程永远不会结束，所以这个指令不要加await\
2. 如果想添加选择步骤，可以使用`inquirer.js`的库
## 添加组件的action
* 需要有个模板`.ejs`，在`.ejs`里编写模板代码，然后编译模板result，将result写入转`.vue文件`，放入对应的文件夹中
### 1. 创建templetes文件夹,新增ejs模板文件
* 其中使用ejs语法替换变量
### 2. 编译模板
1. 使用`ejs`的库